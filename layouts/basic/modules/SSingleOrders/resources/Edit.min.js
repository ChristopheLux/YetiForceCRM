
Vtiger_Edit_Js("SSingleOrders_Edit_Js",{},{inventoryFieldToCopy:{sum_margin:"margin",sum_marginp:"marginP",sum_total:"totalPrice",sum_gross:"grossPrice",sum_discount:"discount"},getPopUpParams:function(b){var c=this._super(b);var a=jQuery('input[name="salesprocessid"]');if(jQuery.inArray(c.module,["Products","Services"])!=-1&&a.length){c.salesprocessid=a.val()}return c},copyInventorySummary:function(c){var b=this;for(var a in this.inventoryFieldToCopy){var d=jQuery('.inventoryItems tfoot .wisableTd[data-sumfield="'+this.inventoryFieldToCopy[a]+'"]');var e=c.find('input[name="'+a+'"]');if(d.length){b.setInventorySummaryField(d,e,c,a)}}},setInventorySummaryField:function(d,e,c,a){var b=this;if(e.length){e.val(app.parseNumberToFloat(d.text()))}else{c.append('<input name="'+a+'" value="'+app.parseNumberToFloat(d.text())+'">')}},registerRecordPreSaveEvent:function(b){var a=this;if(typeof b=="undefined"){b=this.getForm()}b.on(Vtiger_Edit_Js.recordPreSave,function(d,c){a.copyInventorySummary(b)})},registerBasicEvents:function(a){this._super(a);this.registerRecordPreSaveEvent(a)}});